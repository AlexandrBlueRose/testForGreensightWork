$(document).ready(function(){function e(){function e(e){var a=$('<li><a class="adress" href="#">'+e.name+"</a></li>"),n=new ymaps.Placemark(e.center,{}),t=new ymaps.GeoObjectCollection(null,{iconLayout:"default#image",iconImageHref:"img/map_label.png",iconImageOffset:[-5,-38]});t.add(n),o.geoObjects.add(t),a.appendTo(s).find("a").bind("click",function(){return n.balloon.isOpen()?n.balloon.close():(o.setCenter(e.center),$(this).parent().parent().children().css("list-style-image","url(../img/radioOff.png)"),$(this).parent().css("list-style-image","url(../img/radioHover.png)")),!1})}var o=new ymaps.Map("map",{center:[55.76,37.64],zoom:10,controls:[]},{searchControlProvider:"yandex#search"});ymaps.templateLayoutFactory.createClass('<div style="color: #FFFFFF; font-weight: bold;">$[properties.iconContent]</div>');o.controls.add("zoomControl",{float:"right",position:{right:10,top:470}});var s=$('<ul class="menu"/>');"ontouchstart"in document.documentElement&&(o.behaviors.disable("drag"),o.behaviors.disable("multiTouch"));for(var a=0,n=t[0].items.length;a<n;a++)e(t[0].items[a]);s.appendTo($(".adress-list"))}function o(e){return""==e.trim()}function s(){$(".mobile-bt2").click(function(){$(".mobile-bt2").swap(".mobile-bt1"),$(".mobile-bt2").attr("class","btnswap"),$(".mobile-bt1").attr("class","mobile-bt2"),$(".btnswap").attr("class","mobile-bt1"),$(".mobile-bt2").css("display","none"),$(".mobile-bt1").click(function(){$(".mobile-bt2").css("display","block")}),0==d?($(".form-map-section").css("display","grid"),$(".data-from-user-section").css("display","none"),d=1):1==d&&($(".form-map-section").css("display","none"),$(".data-from-user-section").css("display","grid"),d=0),s()})}function a(){o($(".name-to-send").val())||o($(".adress-to-send").val())||o($(".comment-to-send").val())||o($(".phone-to-send").val())||0==$(".all-content").find(".error").length&&($(".send-data").css({"background-color":"#212bff",color:"ffffff"}),$(".send-data").prop("disabled",!1),c=1)}function n(){$(".send-data").css("background-color","edeeef"),$(".send-data").css("color","#b8bed8")}ymaps.ready(e);var t=[{name:"",iconLayout:"default#image",iconImageHref:"img/map_label.png",iconImageSize:[30,42],iconImageOffset:[-5,-38],items:[{center:[55.801131,37.508167],name:"Пункт Выдачи заказов Песчаная улица,дом 13"},{center:[55.757556,37.651592],name:"Пункт Выдачи заказов Подсосенский переулок,11"}]}];$(".button-map").click(function(){$(".form-map-section").css("display","grid"),$(".data-from-user-section").css("display","none"),$(".button-map").css({"background-image":"url(../img/activeTab1.png)",color:"#212bff","z-index":"2"}),$(".button-delivery-data").css({"background-image":"url(../img/tabOff1.png)",color:"#8288a2","z-index":"1"})}),$(".button-delivery-data").click(function(){$(".form-map-section").css("display","none"),$(".data-from-user-section").css("display","grid"),$(".button-map").css({"background-image":"url(../img/tabOff1.png)",color:"#8288a2","z-index":"1"}),$(".button-delivery-data").css({"background-image":"url(../img/activeTab1.png)",color:"#212bff","z-index":"2"})}),$("#phone-to-send").mask("+7(999)999-99-99",{placeholder:"+7(___)___-__-__"}),$(".name-to-send").focusout(function(e){if(!/^[?!,.а-яА-ЯёЁ0-9\s]+$/gm.test($(".name-to-send").val()))return e.preventDefault(),$(".data-name-block").length<2&&$(".data-name-block").append('<div><span class="error" style="color:#ff0000">Error message</span></div>'),$(".name-to-send").css({border:"1px solid #ff0000"}),$(".send-data").prop("disabled",!0),c=0,n(),!1;o($(".name-to-send").val())?($(".data-name-block").length<2&&$(".data-name-block").append('<div><span class="error" style="color:#ff0000">Error message</span></div>'),$(".send-data").prop("disabled",!0),c=0,n(),$(".name-to-send").css({border:"1px solid #ff0000"})):(a(),$(".data-name-block .error").remove(),$(".name-to-send").css({border:"1px solid #dadef0"}))}),$(".phone-to-send").focusout(function(){o($(".phone-to-send").val())?($(".data-phone-block").length<3&&$(".data-phone-block").append('<div><span class="error" style="color:#ff0000">Error message</span></div>'),$(".phone-to-send").css({border:"1px solid #ff0000"}),$(".send-data").prop("disabled",!0),c=0,n()):o($(".phone-to-send").val())?($(".data-phone-block").length<3&&$(".data-phone-block").append('<div><span class="error" style="color:#ff0000">Error message</span></div>'),$(".phone-to-send").css({border:"1px solid #ff0000"}),$(".send-data").prop("disabled",!0),c=0,n()):(a(),$(".data-phone-block .error").remove(),$(".phone-to-send").css({border:"1px solid #dadef0"}))}),document.getElementById("phone-to-send").onkeydown=function(e){return e.which>=48&&e.which<=57||e.which>=96&&e.which<=105||8==e.which||e.which>=37&&e.which<=40||46==e.which},$(".adress-to-send").focusout(function(){o($(".adress-to-send").val())?($(".data-adress-block").length<3&&$(".data-adress-block").append('<div><span class="error" style="color:#ff0000">Error message</span></div>'),$(".adress-to-send").css({border:"1px solid #ff0000"}),$(".send-data").prop("disabled",!0),c=0,n()):(a(),$(".data-adress-block .error").remove(),$(".adress-to-send").css({border:"1px solid #dadef0"}))}),$(".comment-to-send").focusout(function(){o($(".comment-to-send").val())?($(".data-comment-block").length<3&&$(".data-comment-block").append('<div><span class="error" style="color:#ff0000">Error message</span></div>'),$(".comment-to-send").css({border:"1px solid #ff0000"}),$(".send-data").prop("disabled",!0),c=0,n()):o($(".comment-to-send").val())?($(".data-comment-block").length<3&&$(".data-coment-block").append('<div><span class="error" style="color:#ff0000">Error message</span></div>'),$(".comment-to-send").css({border:"1px solid #ff0000"}),$(".send-data").prop("disabled",!0),c=0,n()):(a(),$(".data-comment-block .error").remove(),$(".comment-to-send").css({border:"1px solid #dadef0"}))}),jQuery.fn.swap=function(e){e=jQuery(e)[0];var o=this[0],s=o.cloneNode(!0),a=e.cloneNode(!0),n=this;return o.parentNode.replaceChild(a,o),e.parentNode.replaceChild(s,e),n[0]=s,this.pushStack(n)};var r=0;$(".mobile-bt1").click(function(){1==d?($(".mobile-bt2").css("display","none"),d=0):($(".mobile-bt2").css("display","block"),r=1)});var d=0;s();var c=0;$(".send-data").mouseenter(function(){1==c&&$(".send-data").css("background-color","#2029ea")}),$(".send-data").mousedown(function(){1==c&&$(".send-data").css("background-color","#1e26d8")}),$(".send-data").mouseleave(function(){1==c&&$(".send-data").css("background-color","#212bff")})});